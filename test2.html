<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>POI-Suche ohne Karte</title>
  <style>
    body { margin:0; font-family: sans-serif; padding: 20px; }
    #search {
      padding: 8px;
      width: 100%;
      max-width: 400px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      font-size: 14px;
    }
    #poi-list {
      max-width: 400px;
    }
    .poi-item {
      padding: 8px;
      border-bottom: 1px solid #eee;
    }
    .poi-item:hover {
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <h2>POI-Suche</h2>
  <input type="text" id="search" placeholder="🔍 POI suchen...">
  <div id="poi-list"></div>

  <!-- Leaflet + Omnivore (nur als Parser für KML) -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-omnivore/leaflet-omnivore.min.js"></script>
  <script>
    const poiListDiv = document.getElementById("poi-list");
    const searchInput = document.getElementById("search");
    const allPOIs = [];

    // Lokale doc.kml laden
    omnivore.kml('doc.kml')
      .on('ready', function(e) {
        e.target.eachLayer(layer => {
          if (layer.feature && layer.feature.properties && layer.feature.properties.name) {
            const name = layer.feature.properties.name;
            const desc = layer.feature.properties.description || "";
            allPOIs.push({ name, desc });
          }
        });
        renderList(allPOIs);
      });

    // Liste anzeigen
    function renderList(pois) {
      poiListDiv.innerHTML = "";
      pois.forEach(poi => {
        const item = document.createElement("div");
        item.className = "poi-item";
        item.innerHTML = `<b>${poi.name}</b><br>${poi.desc}`;
        poiListDiv.appendChild(item);
      });
    }

    // Suche
    searchInput.addEventListener("input", () => {
      const term = searchInput.value.toLowerCase();
      const filtered = allPOIs.filter(poi =>
        poi.name.toLowerCase().includes(term) ||
        poi.desc.toLowerCase().includes(term)
      );
      renderList(filtered);
    });
  </script>
</body>
</html>
